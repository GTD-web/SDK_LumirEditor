{"version":3,"sources":["../src/index.ts","../src/components/LumirEditor.tsx","../src/utils/cn.ts","../src/utils/s3-uploader.ts","../src/blocks/HtmlPreview.tsx"],"sourcesContent":["\"use client\";\r\n\r\n// 컴포넌트 및 유틸리티 export\r\nexport {\r\n  default as LumirEditor,\r\n  ContentUtils,\r\n  EditorConfig,\r\n} from \"./components/LumirEditor\";\r\nexport { cn } from \"./utils/cn\";\r\nexport { createS3Uploader } from \"./utils/s3-uploader\";\r\nexport { HtmlPreview } from \"./blocks/HtmlPreview\";\r\n\r\n// 타입 export (별도 파일에서 관리)\r\nexport type {\r\n  LumirEditorProps,\r\n  EditorType,\r\n  DefaultPartialBlock,\r\n  DefaultBlockSchema,\r\n  DefaultInlineContentSchema,\r\n  DefaultStyleSchema,\r\n  PartialBlock,\r\n  BlockNoteEditor,\r\n} from \"./types\";\r\nexport type { S3UploaderConfig } from \"./utils/s3-uploader\";\r\n","\"use client\";\n\nimport { useEffect, useMemo, useCallback, useState, useRef } from \"react\";\nimport {\n  useCreateBlockNote,\n  SideMenu as BlockSideMenu,\n  SideMenuController,\n  DragHandleButton,\n  SuggestionMenuController,\n  getDefaultReactSlashMenuItems,\n} from \"@blocknote/react\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\nimport { defaultBlockSpecs } from \"@blocknote/core\";\nimport { cn } from \"../utils/cn\";\n\nimport type {\n  DefaultPartialBlock,\n  LumirEditorProps,\n  DefaultBlockSchema,\n  DefaultInlineContentSchema,\n  DefaultStyleSchema,\n} from \"../types\";\n\nimport { createS3Uploader } from \"../utils/s3-uploader\";\nimport { HtmlPreview } from \"../blocks/HtmlPreview\";\n\n// ==========================================\n// 유틸리티 클래스들\n// ==========================================\n\n/**\n * 콘텐츠 관리 유틸리티\n * 기본 블록 생성 및 콘텐츠 검증 로직을 담당\n */\nexport class ContentUtils {\n  /**\n   * JSON 문자열의 유효성을 검증합니다\n   * @param jsonString 검증할 JSON 문자열\n   * @returns 유효한 JSON 문자열인지 여부\n   */\n  static isValidJSONString(jsonString: string): boolean {\n    try {\n      const parsed = JSON.parse(jsonString);\n      return Array.isArray(parsed);\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * JSON 문자열을 DefaultPartialBlock 배열로 파싱합니다\n   * @param jsonString JSON 문자열\n   * @returns 파싱된 블록 배열 또는 null (파싱 실패 시)\n   */\n  static parseJSONContent(jsonString: string): DefaultPartialBlock[] | null {\n    try {\n      const parsed = JSON.parse(jsonString);\n      if (Array.isArray(parsed)) {\n        return parsed as DefaultPartialBlock[];\n      }\n      return null;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * 기본 paragraph 블록 생성\n   * @returns 기본 설정이 적용된 DefaultPartialBlock\n   */\n  static createDefaultBlock(): DefaultPartialBlock {\n    return {\n      type: \"paragraph\",\n      props: {\n        textColor: \"default\",\n        backgroundColor: \"default\",\n        textAlignment: \"left\",\n      },\n      content: [{ type: \"text\", text: \"\", styles: {} }],\n      children: [],\n    };\n  }\n\n  /**\n   * 콘텐츠 유효성 검증 및 기본값 설정\n   * @param content 사용자 제공 콘텐츠 (객체 배열 또는 JSON 문자열)\n   * @param emptyBlockCount 빈 블록 개수 (기본값: 3)\n   * @returns 검증된 콘텐츠 배열\n   */\n  static validateContent(\n    content?: DefaultPartialBlock[] | string,\n    emptyBlockCount: number = 3\n  ): DefaultPartialBlock[] {\n    // 1. 문자열인 경우 JSON 파싱 시도\n    if (typeof content === \"string\") {\n      if (content.trim() === \"\") {\n        return this.createEmptyBlocks(emptyBlockCount);\n      }\n\n      const parsedContent = this.parseJSONContent(content);\n      if (parsedContent && parsedContent.length > 0) {\n        return parsedContent;\n      }\n\n      // 파싱 실패 시 빈 블록 생성\n      return this.createEmptyBlocks(emptyBlockCount);\n    }\n\n    // 2. 배열인 경우 기존 로직\n    if (!content || content.length === 0) {\n      return this.createEmptyBlocks(emptyBlockCount);\n    }\n\n    return content;\n  }\n\n  /**\n   * 빈 블록들을 생성합니다\n   * @param emptyBlockCount 생성할 블록 개수\n   * @returns 생성된 빈 블록 배열\n   */\n  private static createEmptyBlocks(\n    emptyBlockCount: number\n  ): DefaultPartialBlock[] {\n    return Array.from({ length: emptyBlockCount }, () =>\n      this.createDefaultBlock()\n    );\n  }\n}\n\n/**\n * 에디터 설정 관리 유틸리티\n * 각종 설정의 기본값과 검증 로직을 담당\n */\nexport class EditorConfig {\n  /**\n   * 테이블 설정 기본값 적용\n   * @param userTables 사용자 테이블 설정\n   * @returns 기본값이 적용된 테이블 설정\n   */\n  static getDefaultTableConfig(userTables?: LumirEditorProps[\"tables\"]) {\n    return {\n      splitCells: userTables?.splitCells ?? true,\n      cellBackgroundColor: userTables?.cellBackgroundColor ?? true,\n      cellTextColor: userTables?.cellTextColor ?? true,\n      headers: userTables?.headers ?? true,\n    };\n  }\n\n  /**\n   * 헤딩 설정 기본값 적용\n   * @param userHeading 사용자 헤딩 설정\n   * @returns 기본값이 적용된 헤딩 설정\n   */\n  static getDefaultHeadingConfig(userHeading?: LumirEditorProps[\"heading\"]) {\n    return userHeading?.levels && userHeading.levels.length > 0\n      ? userHeading\n      : { levels: [1, 2, 3, 4, 5, 6] as (1 | 2 | 3 | 4 | 5 | 6)[] };\n  }\n\n  /**\n   * 비활성화할 확장 기능 목록 생성\n   * @param userExtensions 사용자 정의 비활성 확장\n   * @param allowVideo 비디오 업로드 허용 여부\n   * @param allowAudio 오디오 업로드 허용 여부\n   * @param allowFile 일반 파일 업로드 허용 여부\n   * @returns 비활성화할 확장 기능 목록\n   */\n  static getDisabledExtensions(\n    userExtensions?: string[],\n    allowVideo = false,\n    allowAudio = false,\n    allowFile = false\n  ): string[] {\n    const set = new Set<string>(userExtensions ?? []);\n    if (!allowVideo) set.add(\"video\");\n    if (!allowAudio) set.add(\"audio\");\n    if (!allowFile) set.add(\"file\");\n    return Array.from(set);\n  }\n}\n\n// 파일 타입 검증 함수\nconst isImageFile = (file: File): boolean => {\n  return (\n    file.size > 0 &&\n    (file.type?.startsWith(\"image/\") ||\n      (!file.type && /\\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(file.name || \"\")))\n  );\n};\n\nconst isHtmlFile = (file: File): boolean => {\n  return (\n    file.size > 0 &&\n    (file.type === \"text/html\" ||\n      file.name?.toLowerCase().endsWith(\".html\") ||\n      file.name?.toLowerCase().endsWith(\".htm\"))\n  );\n};\n\nexport default function LumirEditor({\n  // editor options\n  initialContent,\n  initialEmptyBlocks = 3,\n  uploadFile,\n  s3Upload,\n  tables,\n  heading,\n  defaultStyles = true,\n  disableExtensions,\n  tabBehavior = \"prefer-navigate-ui\",\n  trailingBlock = true,\n  allowVideoUpload = false,\n  allowAudioUpload = false,\n  allowFileUpload = false,\n  // view options\n  editable = true,\n  theme = \"light\",\n  formattingToolbar = true,\n  linkToolbar = true,\n  sideMenu = true,\n  emojiPicker = true,\n  filePanel = true,\n  tableHandles = true,\n  onSelectionChange,\n  className = \"\",\n  sideMenuAddButton = false,\n  // callbacks / refs\n  onContentChange,\n}: LumirEditorProps) {\n  // 이미지 업로드 로딩 상태\n  const [isUploading, setIsUploading] = useState(false);\n  const validatedContent = useMemo<DefaultPartialBlock[]>(() => {\n    return ContentUtils.validateContent(initialContent, initialEmptyBlocks);\n  }, [initialContent, initialEmptyBlocks]);\n\n  // 테이블 설정 메모이제이션\n  const tableConfig = useMemo(() => {\n    return EditorConfig.getDefaultTableConfig(tables);\n  }, [\n    tables?.splitCells,\n    tables?.cellBackgroundColor,\n    tables?.cellTextColor,\n    tables?.headers,\n  ]);\n\n  // 헤딩 설정 메모이제이션\n  const headingConfig = useMemo(() => {\n    return EditorConfig.getDefaultHeadingConfig(heading);\n  }, [heading?.levels?.join(\",\") ?? \"\"]);\n\n  // 비활성화 확장 메모이제이션\n  const disabledExtensions = useMemo(() => {\n    return EditorConfig.getDisabledExtensions(\n      disableExtensions,\n      allowVideoUpload,\n      allowAudioUpload,\n      allowFileUpload\n    );\n  }, [disableExtensions, allowVideoUpload, allowAudioUpload, allowFileUpload]);\n\n  // fileNameTransform 콜백을 ref로 관리 (에디터 재생성 방지)\n  const fileNameTransformRef = useRef(s3Upload?.fileNameTransform);\n  useEffect(() => {\n    fileNameTransformRef.current = s3Upload?.fileNameTransform;\n  }, [s3Upload?.fileNameTransform]);\n\n  // S3 업로드 설정 메모이제이션 (객체 참조 안정화)\n  // 주의: fileNameTransform은 ref로 관리하므로 의존성에서 제외\n  const memoizedS3Upload = useMemo(() => {\n    if (!s3Upload) return undefined;\n    return {\n      apiEndpoint: s3Upload.apiEndpoint,\n      env: s3Upload.env,\n      path: s3Upload.path,\n      appendUUID: s3Upload.appendUUID,\n      preserveExtension: s3Upload.preserveExtension,\n      // 최신 콜백을 항상 사용하도록 ref를 통해 접근\n      fileNameTransform: ((originalName: string, file: File) => {\n        return fileNameTransformRef.current\n          ? fileNameTransformRef.current(originalName, file)\n          : originalName;\n      }) as ((originalName: string, file: File) => string) | undefined,\n    };\n  }, [\n    s3Upload?.apiEndpoint,\n    s3Upload?.env,\n    s3Upload?.path,\n    s3Upload?.appendUUID,\n    s3Upload?.preserveExtension,\n  ]);\n\n  const editor = useCreateBlockNote(\n    {\n      initialContent: validatedContent as DefaultPartialBlock[],\n      // @ts-ignore - 커스텀 블록 스키마 추가\n      blockSpecs: {\n        ...defaultBlockSpecs,\n        // @ts-ignore - 커스텀 블록 추가\n        htmlPreview: HtmlPreview,\n      },\n      tables: tableConfig,\n      heading: headingConfig,\n      animations: false, // 기본적으로 애니메이션 비활성화\n      defaultStyles,\n      // 확장 비활성: 비디오/오디오/파일 제어\n      disableExtensions: disabledExtensions,\n      tabBehavior,\n      trailingBlock,\n      uploadFile: async (file) => {\n        // 이미지 파일만 허용 (이미지 전용 에디터)\n        if (!isImageFile(file)) {\n          throw new Error(\"Only image files are allowed\");\n        }\n\n        try {\n          let imageUrl: string;\n\n          // 1. 사용자 정의 uploadFile 우선\n          if (uploadFile) {\n            imageUrl = await uploadFile(file);\n          }\n          // 2. S3 업로드 (uploadFile 없을 때)\n          else if (memoizedS3Upload?.apiEndpoint) {\n            const s3Uploader = createS3Uploader(memoizedS3Upload);\n            imageUrl = await s3Uploader(file);\n          }\n          // 3. 업로드 방법이 없으면 에러\n          else {\n            throw new Error(\"No upload method available\");\n          }\n\n          // BlockNote가 자동으로 이미지 블록을 생성하도록 URL만 반환\n          return imageUrl;\n        } catch (error) {\n          console.error(\"Image upload failed:\", error);\n          throw new Error(\n            \"Upload failed: \" +\n              (error instanceof Error ? error.message : String(error))\n          );\n        }\n      },\n      pasteHandler: (ctx) => {\n        const { event, editor, defaultPasteHandler } = ctx as any;\n        const fileList =\n          (event?.clipboardData?.files as FileList | null) ?? null;\n        const files: File[] = fileList ? Array.from(fileList) : [];\n        const acceptedFiles: File[] = files.filter(isImageFile);\n\n        // 파일이 있지만 이미지가 없으면 기본 처리 막고 무시\n        if (files.length > 0 && acceptedFiles.length === 0) {\n          event.preventDefault();\n          return true;\n        }\n\n        // 이미지가 없으면 기본 처리\n        if (acceptedFiles.length === 0) {\n          return defaultPasteHandler() ?? false;\n        }\n\n        event.preventDefault();\n        (async () => {\n          // 붙여넣기로 여러 이미지 업로드 시 로딩 상태 관리\n          setIsUploading(true);\n          try {\n            for (const file of acceptedFiles) {\n              try {\n                // 에디터의 uploadFile 함수 사용 (통일된 로직)\n                const url = await editor.uploadFile(file);\n                editor.pasteHTML(`<img src=\"${url}\" alt=\"image\" />`);\n              } catch (err) {\n                console.warn(\n                  \"Image upload failed, skipped:\",\n                  file.name || \"\",\n                  err\n                );\n              }\n            }\n          } finally {\n            setIsUploading(false);\n          }\n        })();\n        return true;\n      },\n    },\n    [\n      validatedContent,\n      tableConfig,\n      headingConfig,\n      defaultStyles,\n      disabledExtensions,\n      tabBehavior,\n      trailingBlock,\n      uploadFile,\n      memoizedS3Upload,\n    ]\n  );\n\n  // 편집 가능 여부 설정\n  useEffect(() => {\n    if (editor) {\n      editor.isEditable = editable;\n    }\n  }, [editor, editable]);\n\n  // 콘텐츠 변경 감지\n  useEffect(() => {\n    if (!editor || !onContentChange) return;\n\n    const handleContentChange = () => {\n      // BlockNote의 올바른 API 사용\n      const blocks = editor.topLevelBlocks as DefaultPartialBlock[];\n      onContentChange(blocks);\n    };\n\n    return editor.onEditorContentChange(handleContentChange);\n  }, [editor, onContentChange]);\n\n  // 드래그앤드롭 이미지/HTML 처리\n  useEffect(() => {\n    const el = editor?.domElement as HTMLElement | undefined;\n    if (!el) return;\n\n    const handleDragOver = (e: DragEvent) => {\n      if (e.defaultPrevented) return;\n      const hasFiles = (\n        e.dataTransfer?.types as unknown as string[] | undefined\n      )?.includes?.(\"Files\");\n      if (hasFiles) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n\n    const handleDrop = (e: DragEvent) => {\n      if (!e.dataTransfer) return;\n      const hasFiles = (\n        (e.dataTransfer.types as unknown as string[] | undefined) ?? []\n      ).includes(\"Files\");\n      if (!hasFiles) return;\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      const items = Array.from(e.dataTransfer.items ?? []);\n      const files = items\n        .filter((it) => it.kind === \"file\")\n        .map((it) => it.getAsFile())\n        .filter((f): f is File => !!f);\n\n      // 이미지 파일과 HTML 파일 분리\n      const imageFiles = files.filter(isImageFile);\n      const htmlFiles = files.filter(isHtmlFile);\n\n      if (imageFiles.length === 0 && htmlFiles.length === 0) return;\n\n      (async () => {\n        setIsUploading(true);\n        try {\n          // 이미지 파일 처리\n          for (const file of imageFiles) {\n            try {\n              if (editor?.uploadFile) {\n                const url = await editor.uploadFile(file);\n                if (url) {\n                  editor.pasteHTML(`<img src=\"${url}\" alt=\"image\" />`);\n                }\n              }\n            } catch (err) {\n              console.warn(\n                \"Image upload failed, skipped:\",\n                file.name || \"\",\n                err\n              );\n            }\n          }\n\n          // HTML 파일 처리\n          for (const file of htmlFiles) {\n            try {\n              const htmlContent = await file.text();\n              \n              // 빈 paragraph 블록을 먼저 삽입한 후 HTML Preview로 변환\n              const currentBlock = editor.getTextCursorPosition().block;\n              editor.insertBlocks(\n                [\n                  {\n                    type: \"paragraph\",\n                  },\n                ],\n                currentBlock,\n                \"after\"\n              );\n              \n              // 방금 삽입한 블록을 가져와서 HTML Preview로 변환\n              const newBlock = editor.getTextCursorPosition().block;\n              // @ts-ignore - 커스텀 블록 타입\n              editor.updateBlock(newBlock, {\n                type: \"htmlPreview\" as any,\n                props: {\n                  htmlContent: htmlContent,\n                  fileName: file.name,\n                  height: \"400px\",\n                } as any,\n              } as any);\n            } catch (err) {\n              console.warn(\n                \"HTML file processing failed, skipped:\",\n                file.name || \"\",\n                err\n              );\n            }\n          }\n        } finally {\n          setIsUploading(false);\n        }\n      })();\n    };\n\n    el.addEventListener(\"dragover\", handleDragOver, { capture: true });\n    el.addEventListener(\"drop\", handleDrop, { capture: true });\n\n    return () => {\n      el.removeEventListener(\"dragover\", handleDragOver, {\n        capture: true,\n      } as any);\n      el.removeEventListener(\"drop\", handleDrop, { capture: true } as any);\n    };\n  }, [editor]);\n\n  // SideMenu 설정 (Add 버튼 제어)\n  const computedSideMenu = useMemo(() => {\n    return sideMenuAddButton ? sideMenu : false;\n  }, [sideMenuAddButton, sideMenu]);\n\n  // Add 버튼 없는 사이드 메뉴 (드래그 핸들만) - 메모이제이션\n  const DragHandleOnlySideMenu = useMemo(() => {\n    return (props: any) => (\n      <BlockSideMenu {...props}>\n        <DragHandleButton {...props} />\n      </BlockSideMenu>\n    );\n  }, []);\n\n  return (\n    <div\n      className={cn(\"lumirEditor\", className)}\n      style={{ position: \"relative\" }}\n    >\n      <BlockNoteView\n        editor={editor}\n        editable={editable}\n        theme={theme}\n        formattingToolbar={formattingToolbar}\n        linkToolbar={linkToolbar}\n        sideMenu={computedSideMenu}\n        slashMenu={false}\n        emojiPicker={emojiPicker}\n        filePanel={filePanel}\n        tableHandles={tableHandles}\n        onSelectionChange={onSelectionChange}\n      >\n        {\n          <SuggestionMenuController\n            triggerCharacter=\"/\"\n            getItems={useCallback(\n              async (query: string) => {\n                const items = getDefaultReactSlashMenuItems(editor);\n                // 비디오, 오디오, 파일 관련 항목 제거\n                const filtered = items.filter((item: any) => {\n                  const key = (item?.key || \"\").toString().toLowerCase();\n                  const title = (item?.title || \"\").toString().toLowerCase();\n                  // 비디오, 오디오, 파일 관련 항목 제거\n                  if ([\"video\", \"audio\", \"file\"].includes(key)) return false;\n                  if (\n                    title.includes(\"video\") ||\n                    title.includes(\"audio\") ||\n                    title.includes(\"file\")\n                  )\n                    return false;\n                  return true;\n                });\n\n                // HTML 미리보기 커스텀 아이템 추가\n                const htmlPreviewItem = {\n                  title: \"HTML Preview\",\n                  key: \"htmlPreview\",\n                  onItemClick: () => {\n                    const currentBlock = editor.getTextCursorPosition().block;\n                    // @ts-ignore - 커스텀 블록 타입\n                    editor.updateBlock(currentBlock, {\n                      type: \"htmlPreview\" as any,\n                      props: {\n                        htmlContent: \"<h1>HTML Preview</h1><p>Drag and drop an HTML file to preview it here.</p>\",\n                        fileName: \"example.html\",\n                        height: \"400px\",\n                      } as any,\n                    } as any);\n                  },\n                  aliases: [\"html\", \"preview\", \"iframe\"],\n                  group: \"Other\",\n                  icon: (\n                    <svg\n                      width=\"18\"\n                      height=\"18\"\n                      viewBox=\"0 0 24 24\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    >\n                      <polyline points=\"16 18 22 12 16 6\"></polyline>\n                      <polyline points=\"8 6 2 12 8 18\"></polyline>\n                    </svg>\n                  ),\n                };\n\n                const allItems = [...filtered, htmlPreviewItem];\n\n                if (!query) return allItems;\n                const q = query.toLowerCase();\n                return allItems.filter(\n                  (item: any) =>\n                    item.title?.toLowerCase().includes(q) ||\n                    (item.aliases || []).some((a: string) =>\n                      a.toLowerCase().includes(q)\n                    )\n                );\n              },\n              [editor]\n            )}\n          />\n        }\n        {!sideMenuAddButton && (\n          <SideMenuController sideMenu={DragHandleOnlySideMenu} />\n        )}\n      </BlockNoteView>\n\n      {/* 이미지 업로드 로딩 스피너 */}\n      {isUploading && (\n        <div className=\"lumirEditor-upload-overlay\">\n          <div className=\"lumirEditor-spinner\" />\n        </div>\n      )}\n    </div>\n  );\n}\n","// clsx와 tailwind-merge를 사용한 className 유틸리티\r\n// 사용자가 직접 설치하도록 권장하거나, 간단한 버전 제공\r\n\r\nexport function cn(...inputs: (string | undefined | null | false)[]) {\r\n  return inputs.filter(Boolean).join(' ');\r\n}\r\n","export interface S3UploaderConfig {\r\n  apiEndpoint: string; // '/api/s3/presigned'(필수)\r\n  env: \"production\" | \"development\"; // 환경 (필수)\r\n  path: string; // 파일 경로 (필수)\r\n  /** 파일명 변환 콜백 - 확장자를 제외한 파일명을 받아 변환합니다 */\r\n  fileNameTransform?: (nameWithoutExt: string, file: File) => string;\r\n  /** true일 경우 파일명 뒤에 UUID를 자동으로 추가합니다 (예: image_abc123.png) */\r\n  appendUUID?: boolean;\r\n  /** false로 설정하면 확장자를 자동으로 붙이지 않음 (기본: true) */\r\n  preserveExtension?: boolean;\r\n}\r\n\r\n// UUID 생성 함수 (crypto.randomUUID 또는 폴백)\r\nconst generateUUID = (): string => {\r\n  if (typeof crypto !== \"undefined\" && crypto.randomUUID) {\r\n    return crypto.randomUUID();\r\n  }\r\n  // 폴백: 간단한 UUID v4 형식 생성\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\r\n    const r = (Math.random() * 16) | 0;\r\n    const v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n};\r\n\r\nexport const createS3Uploader = (config: S3UploaderConfig) => {\r\n  const {\r\n    apiEndpoint,\r\n    env,\r\n    path,\r\n    fileNameTransform,\r\n    appendUUID,\r\n    preserveExtension = true,\r\n  } = config;\r\n\r\n  // 필수 파라미터 검증\r\n  if (!apiEndpoint || apiEndpoint.trim() === \"\") {\r\n    throw new Error(\r\n      \"apiEndpoint is required for S3 upload. Please provide a valid API endpoint.\"\r\n    );\r\n  }\r\n\r\n  if (!env) {\r\n    throw new Error(\"env is required. Must be 'development' or 'production'.\");\r\n  }\r\n\r\n  if (!path || path.trim() === \"\") {\r\n    throw new Error(\"path is required and cannot be empty.\");\r\n  }\r\n\r\n  // 파일명에 UUID 추가하는 함수\r\n  const appendUUIDToFileName = (filename: string): string => {\r\n    const lastDotIndex = filename.lastIndexOf(\".\");\r\n    if (lastDotIndex === -1) {\r\n      // 확장자가 없는 경우\r\n      return `${filename}_${generateUUID()}`;\r\n    }\r\n    const name = filename.substring(0, lastDotIndex);\r\n    const ext = filename.substring(lastDotIndex);\r\n    return `${name}_${generateUUID()}${ext}`;\r\n  };\r\n\r\n  // 계층 구조 파일명 생성 함수\r\n  const generateHierarchicalFileName = (file: File): string => {\r\n    // 0. 확장자 분리\r\n    const originalName = file.name;\r\n    const lastDotIndex = originalName.lastIndexOf(\".\");\r\n    const nameWithoutExt =\r\n      lastDotIndex === -1\r\n        ? originalName\r\n        : originalName.substring(0, lastDotIndex);\r\n    const extension =\r\n      lastDotIndex === -1 ? \"\" : originalName.substring(lastDotIndex);\r\n\r\n    let filename = nameWithoutExt;\r\n\r\n    // 1. 사용자 정의 파일명 변환 콜백 적용 (확장자 제외한 이름만)\r\n    if (fileNameTransform) {\r\n      filename = fileNameTransform(filename, file);\r\n    }\r\n\r\n    // 2. UUID 자동 추가 (appendUUID가 true인 경우)\r\n    if (appendUUID) {\r\n      filename = `${filename}_${generateUUID()}`;\r\n    }\r\n\r\n    // 3. 확장자 다시 붙이기 (preserveExtension이 true인 경우만)\r\n    if (preserveExtension) {\r\n      filename = `${filename}${extension}`;\r\n    }\r\n\r\n    // {env}/{path}/{filename}\r\n    return `${env}/${path}/${filename}`;\r\n  };\r\n\r\n  return async (file: File): Promise<string> => {\r\n    try {\r\n      // 파일 업로드 시에도 apiEndpoint 재검증\r\n      if (!apiEndpoint || apiEndpoint.trim() === \"\") {\r\n        throw new Error(\r\n          \"Invalid apiEndpoint: Cannot upload file without a valid API ENDPOINT\"\r\n        );\r\n      }\r\n\r\n      // 1. 계층 구조 파일명 생성\r\n      const fileName = generateHierarchicalFileName(file);\r\n\r\n      // 2. presigned URL 요청\r\n      const response = await fetch(\r\n        `${apiEndpoint}?key=${encodeURIComponent(fileName)}`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorText = (await response.text()) || \"\";\r\n        throw new Error(\r\n          `Failed to get presigned URL: ${response.statusText}, ${errorText}`\r\n        );\r\n      }\r\n\r\n      const responseData = await response.json();\r\n      const { presignedUrl, publicUrl } = responseData;\r\n\r\n      // 3. S3에 업로드\r\n      const uploadResponse = await fetch(presignedUrl, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": file.type || \"application/octet-stream\",\r\n        },\r\n        body: file,\r\n      });\r\n\r\n      if (!uploadResponse.ok) {\r\n        throw new Error(`Failed to upload file: ${uploadResponse.statusText}`);\r\n      }\r\n\r\n      // 4. 공개 URL 반환\r\n      return publicUrl;\r\n    } catch (error) {\r\n      console.error(\"S3 upload failed:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n};\r\n","import { createReactBlockSpec } from \"@blocknote/react\";\r\nimport { useState } from \"react\";\r\n\r\n// HTML 미리보기 블록 속성 타입\r\nexport interface HtmlPreviewProps {\r\n  htmlContent: string;\r\n  fileName?: string;\r\n  height?: string;\r\n}\r\n\r\n// HTML 미리보기 블록 스키마\r\nexport const HtmlPreview = createReactBlockSpec(\r\n  {\r\n    type: \"htmlPreview\" as const,\r\n    propSchema: {\r\n      htmlContent: {\r\n        default: \"\",\r\n      },\r\n      fileName: {\r\n        default: \"\",\r\n      },\r\n      height: {\r\n        default: \"400px\",\r\n      },\r\n    },\r\n    content: \"none\",\r\n  },\r\n  {\r\n    render: (props) => {\r\n      const [isExpanded, setIsExpanded] = useState(true);\r\n      const htmlContent = props.block.props.htmlContent || \"\";\r\n      const fileName = props.block.props.fileName || \"HTML Document\";\r\n      const height = props.block.props.height || \"400px\";\r\n\r\n      return (\r\n        <div\r\n          style={{\r\n            border: \"1px solid #e0e0e0\",\r\n            borderRadius: \"8px\",\r\n            overflow: \"hidden\",\r\n            backgroundColor: \"#f9f9f9\",\r\n            marginTop: \"8px\",\r\n            marginBottom: \"8px\",\r\n          }}\r\n        >\r\n          {/* 헤더 */}\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n              padding: \"12px 16px\",\r\n              backgroundColor: \"#fff\",\r\n              borderBottom: \"1px solid #e0e0e0\",\r\n              cursor: \"pointer\",\r\n            }}\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n          >\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <polyline points=\"16 18 22 12 16 6\"></polyline>\r\n                <polyline points=\"8 6 2 12 8 18\"></polyline>\r\n              </svg>\r\n              <span style={{ fontWeight: 500, fontSize: \"14px\" }}>\r\n                {fileName}\r\n              </span>\r\n            </div>\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              style={{\r\n                transform: isExpanded ? \"rotate(180deg)\" : \"rotate(0deg)\",\r\n                transition: \"transform 0.2s\",\r\n              }}\r\n            >\r\n              <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n            </svg>\r\n          </div>\r\n\r\n          {/* iframe 미리보기 */}\r\n          {isExpanded && (\r\n            <div\r\n              style={{\r\n                padding: \"0\",\r\n                backgroundColor: \"#fff\",\r\n              }}\r\n            >\r\n              <iframe\r\n                srcDoc={htmlContent}\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: height,\r\n                  border: \"none\",\r\n                  display: \"block\",\r\n                }}\r\n                sandbox=\"allow-scripts allow-same-origin\"\r\n                title={fileName}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    },\r\n  }\r\n);\r\n"],"mappings":"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","names":["import_react","import_react","import_jsx_runtime","editor","BlockSideMenu"]}